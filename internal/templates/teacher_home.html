<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
    <nav>     
        <a href="/logout">–í—ã–π—Ç–∏</a>
    </nav>
    </header>
    <div class="container">
        <div class="header">
            <h1>üìä –ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</p>
        </div>
        
        <div class="classes-grid">
            {{range .Classes}}
            <div class="class-card" onclick="window.location='/teacher/class?class_id={{.ID}}'">
                <h3>{{.Name}}</h3>
                <p>{{.Grade}} –∫–ª–∞—Å—Å</p>
                <a href="/teacher/class?class_id={{.ID}}" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–ª–∞—Å—Å—É</a>
            </div>
            {{else}}
            <div class="class-card">
                <h3>–ù–µ—Ç –∫–ª–∞—Å—Å–æ–≤</h3>
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤</p>
            </div>
            {{end}}
        </div>
        
        {{if .ClassStats}}
        <div class="activity-chart">
            <h2>üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">{{.ClassStats.student_count}}</div>
                    <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{.ClassStats.total_attempts}}</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{.ClassStats.correct_attempts}}</div>
                    <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{printf "%.1f" .ClassStats.accuracy_percent}}%</div>
                    <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
            </div>
            
            {{if .ClassStats.top_students}}
            <h3 style="margin-top: 20px;">üèÜ –õ—É—á—à–∏–µ —É—á–µ–Ω–∏–∫–∏</h3>
            <div class="student-list">
                {{range .ClassStats.top_students}}
                <div class="student-row" onclick="window.location='/teacher/student?student_id={{.id}}'">
                    <span>{{.name}}</span>
                    <span>
                        <span class="badge badge-success">{{.correct}}/{{.total}}</span>
                        <span>{{printf "%.1f" .accuracy}}%</span>
                    </span>
                </div>
                {{end}}
            </div>
            {{end}}
        </div>
        {{end}}
    </div>
</body>
</html>